function addTestimonial() {
  const name = document.getElementById("name").value.trim();
  const message = document.getElementById("message").value.trim();

  if (!name || !message) return alert("Please enter both name and message.");

  const container = document.getElementById("testimonials-container");

  const card = document.createElement("div");
  card.className = "card mb-3";

  card.innerHTML = `
    <div class="card-body">
      <h5 class="card-title">${name}</h5>
      <p class="card-text">${message}</p>
      <button class="btn btn-sm btn-success" onclick="editTestimonial(this)">Edit</button>
      <button class="btn btn-sm btn-danger" onclick="deleteTestimonial(this)">Delete</button>
    </div>
  `;

  container.appendChild(card);
  document.getElementById("name").value = "";
  document.getElementById("message").value = "";
}

function deleteTestimonial(button) {
  const card = button.closest(".card");
  card.remove();
}

function editTestimonial(button) {
  const cardBody = button.closest(".card-body");
  const nameEl = cardBody.querySelector(".card-title");
  const msgEl = cardBody.querySelector(".card-text");

  const originalName = nameEl.textContent;
  const originalMsg = msgEl.textContent;

  // Replace with input fields
  cardBody.innerHTML = `
    <input type="text" class="form-control mb-2" id="edit-name" value="${originalName}" />
    <textarea class="form-control mb-2" id="edit-msg">${originalMsg}</textarea>
    <button class="btn btn-sm btn-primary" onclick="saveEdit(this)">Save</button>
    <button class="btn btn-sm btn-secondary" onclick="cancelEdit(this, '${originalName}', \`${originalMsg}\`)">Cancel</button>
  `;
}

function saveEdit(button) {
  const cardBody = button.closest(".card-body");
  const newName = cardBody.querySelector("#edit-name").value.trim();
  const newMsg = cardBody.querySelector("#edit-msg").value.trim();

  if (!newName || !newMsg) return alert("Both fields are required.");

  cardBody.innerHTML = `
    <h5 class="card-title">${newName}</h5>
    <p class="card-text">${newMsg}</p>
    <button class="btn btn-sm btn-success" onclick="editTestimonial(this)">Edit</button>
    <button class="btn btn-sm btn-danger" onclick="deleteTestimonial(this)">Delete</button>
  `;
}

function cancelEdit(button, name, message) {
  const cardBody = button.closest(".card-body");

  cardBody.innerHTML = `
    <h5 class="card-title">${name}</h5>
    <p class="card-text">${message}</p>
    <button class="btn btn-sm btn-success" onclick="editTestimonial(this)">Edit</button>
    <button class="btn btn-sm btn-danger" onclick="deleteTestimonial(this)">Delete</button>
  `;
}
