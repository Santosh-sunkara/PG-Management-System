import customers from '../customers.json';
import CustomerDetails from './CustomerDetails';
import CustomerForm from './CustomerForm';
import {useState} from 'react';
function CustomerList(){
    //console.log(customers);
  const [selectedCustomer,setSelectedCustomer] = useState(
    {
    id: '',
    firstname : '',
    lastname :'',
    email : ''
    }
  );
 
  //Updating the customers array
  //const [allCustomer,setAllCustomers]=useState(customers);
  //const onCustomerSelect = (e,customer)=> console.log(customer);
  const onCustomerSelect = (e,customer)=>{
            setSelectedCustomer(customer);
  };
 
  //Add Customer function to increase the id
  const addCustomer = (newCustomer)=>{
    const totalCustomers =customers.length;
    newCustomer.id=totalCustomers + 1;
    //setAllCustomers(allCustomer.push(newCustomer));
    customers.push(newCustomer);
 
  }
  return (
    <div className="container">
    <div className="row">
      <h2>Customer List</h2>
      <table border="1" cellPadding="10" cellSpacing="0">
        <thead>
          <tr>
            <th>Id</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
           
          </tr>
        </thead>
        <tbody>
          {customers.map((customer) => (
              <tr onClick={(e)=>onCustomerSelect(e,customer)} key={customer.id}>
              <td>{customer.id}</td>
              <td>{customer.firstname}</td>
              <td>{customer.lastname}</td>
              <td>{customer.email}</td>
             
            </tr>
          ))}
        </tbody>
      </table>
    </div>
    <div className="row">
        <div className="col-md-6">
        <CustomerForm addCustomer={addCustomer} customers={customers}/>
        </div>
        <div className="col-md-6">
        <h2>Customer Details</h2>
        <CustomerDetails customer={selectedCustomer} />
        </div>
    </div>
    </div>
  );
}
export default CustomerList;
 










import React, { useState } from 'react';
 
function CustomerForm(props) {
  const [customerData, setcustomerData] = useState({
    firstname: '',
    secondname: '',
    email: '',
  });
 
  const handleChange = (e) => {
    const { name, value } = e.target;
    //can have validation logic
    setcustomerData((prevData) => ({
      ...prevData,
      [name]: value,
    }));
  };
 
  const handleSubmit = (e) => {
    e.preventDefault(); // Prevent page reload
    //console.log('customer submitted:', customerData);
    // You can now send `customerData` to a server or API
    props.addCustomer(customerData);//Calling the function using props from Parent Component
    console.log(customerData);
  };
  const validate=()=>{
        //Logic to validate data
  };
  return (
    <div>
      <h2>Add Customer</h2>
      <form onSubmit={handleSubmit}>
        <div>
          <label htmlFor="firstname">First Name:</label><br />
          <input
            type="text"
            id="firstname"
            name="firstname"
            value={customerData.firstname}
            onChange={handleChange}
            required
          />
        </div>
        <br />
 
        <div>
          <label htmlFor="lastname">Second Name:</label><br />
          <input
            type="text"
            id="lastname"
            name="lastname"
            value={customerData.lastname}
            onChange={handleChange}
            required
          />
        </div>
        <br />
 
        <div>
          <label htmlFor="email">Email:</label><br />
          <input
            type="email"
            id="email"
            name="email"
            value={customerData.email}
            onChange={handleChange}
            required
          />
        </div>
        <br />
 
        <button type="submit">Submit</button>
      </form>
    </div>
  );
}
 
export default CustomerForm;
 
 
